<!DOCTYPE html><html><head>
      <title>nvnmd</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\mz\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.6.1\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="use-nvnmd">Use NVNMD</h1>

<ul>
<li><a href="#1-introduction">1 Introduction</a></li>
<li><a href="#2-training">2 Training</a>
<ul>
<li><a href="#2-1-input-script">2-1 Input script</a>
<ul>
<li><a href="#2-1-1-nvnmd">2-1-1 nvnmd</a></li>
<li><a href="#2-1-2-learning_rate">2-1-2 learning_rate</a></li>
<li><a href="#2-1-3-loss">2-1-3 loss</a></li>
<li><a href="#2-1-4-training">2-1-4 training</a></li>
</ul>
</li>
<li><a href="#2-2-training">2-2 Training</a></li>
</ul>
</li>
<li><a href="#3-testing">3 Testing</a></li>
<li><a href="#4-running-md">4 Running MD</a>
<ul>
<li><a href="#4-1-account-application">4-1 Account application</a></li>
<li><a href="#4-2-adding-task">4-2 Adding task</a></li>
<li><a href="#4-3-cancelling-calculation">4-3 Cancelling calculation</a></li>
<li><a href="#4-4-downloading-results">4-4 Downloading results</a></li>
<li><a href="#4-5-deleting-record">4-5 Deleting record</a></li>
<li><a href="#4-6-clearing-records">4-6 Clearing records</a></li>
</ul>
</li>
</ul>
<h1 class="mume-header" id="1-introduction">1 Introduction</h1>

<p>NVNMD stands for non-von Neumann molecular dynamics.</p>
<p>This is the training code we used to generate the results in our paper entitled &quot;Accurate and Efficient Molecular Dynamics based on Machine Learning and Non Von Neumann Architecture&quot;, which has been accepted by npj Computational Materials (<a href="https://www.nature.com/articles/s41524-022-00773-z">DOI: 10.1038/s41524-022-00773-z</a>).</p>
<p>Any user can follow two consecutive steps to run molecular dynamics (MD) on the proposed NVNMD computer, which has been released online: (i) to train a machine learning (ML) model that can decently reproduce the potential energy surface (PES); and (ii) to deploy the trained ML model on the proposed NVNMD computer, then run MD there to obtain the atomistic trajectories.</p>
<h1 class="mume-header" id="2-training">2 Training</h1>

<p>Our training procedure consists of not only the continuous neural network (CNN) training, but also the quantized neural network (QNN) training which uses the results of CNN as inputs. It is performed on CPU or GPU by using the training codes we open-sourced online.</p>
<p>To train a ML model that can decently reproduce the PES, training and testing data set should be prepared first. This can be done by using either the state-of-the-art active learning tools, or the outdated (i.e., less efficient) brute-force density functional theory (DFT)-based ab-initio molecular dynamics (AIMD) sampling.</p>
<p>If you just want to simply test the training function, you can use the example in the <code>$deepmd_source_dir/examples/nvnmd</code> directory. If you want to fully experience training and running MD functions, you can download the complete example from the <a href="https://github.com/LiuGroupHNU/nvnmd-example">website</a>.</p>
<p>Then, copy the data set to working directory</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> -p <span class="token variable">$workspace</span>
<span class="token builtin class-name">cd</span> <span class="token variable">$workspace</span>
<span class="token function">mkdir</span> -p data
<span class="token function">cp</span> -r <span class="token variable">$dataset</span> data
</pre><p>where <code>$dataset</code> is the path to the data set and <code>$workspace</code> is the path to working directory.</p>
<h2 class="mume-header" id="2-1-input-script">2-1 Input script</h2>

<p>Create and go to the training directory.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> train
<span class="token builtin class-name">cd</span> train 
</pre><p>Then copy the input script <code>train_cnn.json</code> and <code>train_qnn.json</code> to the directory <code>train</code></p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">cp</span> -r <span class="token variable">$deepmd_source_dir</span>/examples/nvnmd/train/train_cnn.json train_cnn.json
<span class="token function">cp</span> -r <span class="token variable">$deepmd_source_dir</span>/examples/nvnmd/train/train_qnn.json train_qnn.json
</pre><p>The structure of the input script is as follows</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;nvnmd&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;learning_rate&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;loss&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;training&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="2-1-1-nvnmd">2-1-1 nvnmd</h3>

<p>The &quot;nvnmd&quot; section is defined as</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;net_size&quot;</span><span class="token operator">:</span><span class="token number">128</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sel&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rcut&quot;</span><span class="token operator">:</span><span class="token number">6.0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rcut_smth&quot;</span><span class="token operator">:</span><span class="token number">0.5</span>
<span class="token punctuation">}</span>
</pre><p>where items are defined as:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Mean</th>
<th>Optional Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>net_size</td>
<td>the size of nueral network</td>
<td>128</td>
</tr>
<tr>
<td>sel</td>
<td>the number of neighbors</td>
<td>integer list of lengths 1 to 4 are acceptable</td>
</tr>
<tr>
<td>rcut</td>
<td>the cutoff radial</td>
<td>(0, 8.0]</td>
</tr>
<tr>
<td>rcut_smth</td>
<td>the smooth cutoff parameter</td>
<td>(0, 8.0]</td>
</tr>
</tbody>
</table>
<h3 class="mume-header" id="2-1-2-learning_rate">2-1-2 learning_rate</h3>

<p>The &quot;learning_rate&quot; section is defined as</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;exp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start_lr&quot;</span><span class="token operator">:</span> <span class="token number">1e-3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stop_lr&quot;</span><span class="token operator">:</span> <span class="token number">3e-8</span><span class="token punctuation">,</span>
    <span class="token property">&quot;decay_steps&quot;</span><span class="token operator">:</span> <span class="token number">5000</span>
<span class="token punctuation">}</span>
</pre><p>where items are defined as:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Mean</th>
<th>Optional Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>learning rate variant type</td>
<td>exp</td>
</tr>
<tr>
<td>start_lr</td>
<td>the learning rate at the beginning of the training</td>
<td>a positive real number</td>
</tr>
<tr>
<td>stop_lr</td>
<td>the desired learning rate at the end of the training</td>
<td>a positive real number</td>
</tr>
<tr>
<td>decay_stops</td>
<td>the learning rate is decaying every {decay_stops} training steps</td>
<td>a positive integer</td>
</tr>
</tbody>
</table>
<h3 class="mume-header" id="2-1-3-loss">2-1-3 loss</h3>

<p>The &quot;loss&quot; section is defined as</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;start_pref_e&quot;</span><span class="token operator">:</span> <span class="token number">0.02</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit_pref_e&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start_pref_f&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit_pref_f&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start_pref_v&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit_pref_v&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</pre><p>where items are defined as:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Mean</th>
<th>Optional Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>start_pref_e</td>
<td>the loss factor of energy at the beginning of the training</td>
<td>zero or positive real number</td>
</tr>
<tr>
<td>limit_pref_e</td>
<td>the loss factor of energy at the end of the training</td>
<td>zero or positive real number</td>
</tr>
<tr>
<td>start_pref_f</td>
<td>the loss factor of force at the beginning of the training</td>
<td>zero or positive real number</td>
</tr>
<tr>
<td>limit_pref_f</td>
<td>the loss factor of force at the end of the training</td>
<td>zero or positive real number</td>
</tr>
<tr>
<td>start_pref_v</td>
<td>the loss factor of virial at the beginning of the training</td>
<td>zero or positive real number</td>
</tr>
<tr>
<td>limit_pref_v</td>
<td>the loss factor of virial at the end of the training</td>
<td>zero or positive real number</td>
</tr>
</tbody>
</table>
<h3 class="mume-header" id="2-1-4-training">2-1-4 training</h3>

<p>The &quot;training&quot; section is defined as</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;seed&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stop_batch&quot;</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;numb_test&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;disp_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lcurve.out&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;disp_freq&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;save_ckpt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;model.ckpt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;save_freq&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;training_data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;systems&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;system1_path&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;system2_path&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;set_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;batch_size&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;batch_size_of_system1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;batch_size_of_system2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>where items are defined as:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Mean</th>
<th>Optional Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>seed</td>
<td>the randome seed</td>
<td>a integer</td>
</tr>
<tr>
<td>stop_batch</td>
<td>the total training steps</td>
<td>a positive integer</td>
</tr>
<tr>
<td>numb_test</td>
<td>the accuracy is test by using {numb_test} sample</td>
<td>a positive integer</td>
</tr>
<tr>
<td>disp_file</td>
<td>the log file where the training message display</td>
<td>a string</td>
</tr>
<tr>
<td>disp_freq</td>
<td>display frequency</td>
<td>a positive integer</td>
</tr>
<tr>
<td>save_ckpt</td>
<td>check point file</td>
<td>a string</td>
</tr>
<tr>
<td>save_freq</td>
<td>save frequency</td>
<td>a positive integer</td>
</tr>
<tr>
<td>systems</td>
<td>a list of data directory which contains the dataset</td>
<td>string list</td>
</tr>
<tr>
<td>set_prefix</td>
<td>the prefix of dataset</td>
<td>a string</td>
</tr>
<tr>
<td>batch_size</td>
<td>a list of batch size of corresponding dataset</td>
<td>a integer list</td>
</tr>
</tbody>
</table>
<h2 class="mume-header" id="2-2-training">2-2 Training</h2>

<p>Training can be invoked by</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token comment"># step1: train CNN</span>
dp train-nvnmd train_cnn.json -s s1
<span class="token comment"># step2: train QNN</span>
dp train-nvnmd train_qnn.json -s s2
</pre><p>After training process, you will get two folders: <code>nvnmd_cnn</code> and <code>nvnmd_qnn</code>. The <code>nvnmd_cnn</code> contains the model after continuous neural network (CNN) training. The <code>nvnmd_qnn</code> contains the model after quantized neural network (QNN) training. The binary file <code>nvnmd_qnn/model.pb</code> is the model file which is used to performs NVNMD in server [<a href="http://nvnmd.picp.vip">http://nvnmd.picp.vip</a>]</p>
<h1 class="mume-header" id="3-testing">3 Testing</h1>

<p>The frozen model can be used in many ways. The most straightforward testing can be invoked by</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> <span class="token builtin class-name">test</span>
dp <span class="token builtin class-name">test</span> -m ./nvnmd_qnn/frozen_model.pb -s path/to/system -d ./test/detail -n <span class="token number">99999</span> -l test/output.log
</pre><p>where the frozen model file to import is given via the <code>-m</code> command line flag, the path to the testing data set is given via the <code>-s</code> command line flag, the file containing details of energy, force and virial accuracy is given via the <code>-d</code> command line flag, the amount of data for testing is given via the <code>-n</code> command line flag.</p>
<h1 class="mume-header" id="4-running-md">4 Running MD</h1>

<p>After CNN and QNN training, you can upload the ML model to our online NVNMD system and run MD there.</p>
<h2 class="mume-header" id="4-1-account-application">4-1 Account application</h2>

<p>The server website of NVNMD is available at <a href="http://nvnmd.picp.vip">http://nvnmd.picp.vip</a>. You can visit the URL and enter the login interface (Figure.1).</p>
<p><img src="./figure_1.png" alt="ALT" title="The login interface"></p>
<center>Figure.1 The login interface</center>
<p>To obtain an account, please send your application to the email (<a href="mailto:jie_liu@hnu.edu.cn">jie_liu@hnu.edu.cn</a>, <a href="mailto:liujie@uw.edu">liujie@uw.edu</a>). The username and password will be sent to you by email.</p>
<h2 class="mume-header" id="4-2-adding-task">4-2 Adding task</h2>

<p>After successfully obtaining the account, enter the username and password in the login interface, and click &quot;Login&quot; to enter the homepage (Figure.2).</p>
<p><img src="./figure_2.png" alt="ALT" title="The homepage"></p>
<center>Figure.2 The homepage</center>
<p>The homepage displays the remaining calculation time and all calculation records not deleted. Click <code>Add a new task</code> to enter the interface for adding a new task (Figure.3).</p>
<p><img src="./figure_3.png" alt="ALT" title="The interface for adding a new task"></p>
<center>Figure.3 The interface for adding a new task</center>
<ul>
<li>Task name: name of the task</li>
<li>Upload mode: two modes of uploading results to online data storage, including <code>Manual upload</code> and <code>Automatic upload</code>. Results need to be uploaded manually to online data storage with <code>Manual upload</code> mode, and will be uploaded automatically with <code>Automatic upload</code> mode.</li>
<li>Input script: input file of the MD simulation.</li>
</ul>
<p>In the input script, one needs to specify the pair style as follows</p>
<pre data-role="codeBlock" data-info="lammps" class="language-lammps"><code>pair_style nvnmd model.pb
pair_coeff * *
</code></pre><ul>
<li>Model file: the ML model named <code>model.pb</code> obtained by QNN training.</li>
<li>Data files: data files containing information required for running an MD simulation (e.g., <code>coord.lmp</code> containing initial atom coordinates).</li>
</ul>
<p>Next, you can click <code>Submit</code> to submit the task and then automatically return to the homepage (Figure.4).</p>
<p><img src="./figure_4.png" alt="ALT" title="The homepage with a new record"></p>
<center>Figure.4 The homepage with a new record</center>
<p>Then, click <code>Refresh</code> to view the latest status of all calculation tasks.</p>
<h2 class="mume-header" id="4-3-cancelling-calculation">4-3 Cancelling calculation</h2>

<p>For the task whose calculation status is <code>Pending</code> and <code>Running</code>, you can click the corresponding <code>Cancel</code> on the homepage to stop the calculation (Figure.5).</p>
<p><img src="./figure_5.png" alt="ALT" title="The homepage with a cancelled task"></p>
<center>Figure.5 The homepage with a cancelled task</center>
<h2 class="mume-header" id="4-4-downloading-results">4-4 Downloading results</h2>

<p>For the task whose calculation status is <code>Completed</code>, <code>Failed</code> and <code>Cancelled</code>, you can click the corresponding <code>Package</code> or <code>Separate files</code> in the <code>Download results</code> bar on the homepage to download results.</p>
<p>Click <code>Package</code> to download a zipped package of all files including input files and output results (Figure.6).</p>
<p><img src="./figure_6.png" alt="ALT" title="The interface for downloading a zipped package"></p>
<center>Figure.6 The interface for downloading a zipped package</center>
<p>Click <code>Separate files</code> to download the required separate files (Figure.7).</p>
<p><img src="./figure_7.png" alt="ALT" title="The interface for downloading separate files"></p>
<center>Figure.7 The interface for downloading separate files</center>
<p>If <code>Manual upload</code> mode is selected or the file has expired, click <code>Upload</code> on the download interface to upload manually.</p>
<h2 class="mume-header" id="4-5-deleting-record">4-5 Deleting record</h2>

<p>For the task no longer needed, you can click the corresponding <code>Delete</code> on the homepage to delete the record.</p>
<p>Records cannot be retrieved after deletion.</p>
<h2 class="mume-header" id="4-6-clearing-records">4-6 Clearing records</h2>

<p>Click <code>Clear calculation records</code> on the homepage to clear all records.</p>
<p>Records cannot be retrieved after clearing.</p>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>